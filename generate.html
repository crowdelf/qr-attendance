<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Генерация QR</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
</head>
<body>
<div class="container">
    <h1>Генерация QR-кода</h1>

    <input type="text" id="fio" placeholder="ФИО">
    <input type="text" id="group" placeholder="Группа">

    <button onclick="generateQR()">Сгенерировать</button>

    <canvas id="qrCanvas" class="qr-box"></canvas>

    <button onclick="location.href='index.html'">Назад</button>
</div>

<script>
function generateQR() {
    const fio = document.getElementById("fio").value.trim();
    const group = document.getElementById("group").value.trim();

    if (!fio || !group) {
        alert("Введите ФИО и группу!");
        return;
    }

    const data = JSON.stringify({ fio, group });

    const canvas = document.getElementById("qrCanvas");

    QRCode.toCanvas(canvas, data, { width: 250 }, function (error) {
        if (error) {
            console.error(error);
            alert("Ошибка при генерации QR-кода");
        } else {
            const students = JSON.parse(localStorage.getItem("students") || "[]");
            students.push({ fio, group });
            localStorage.setItem("students", JSON.stringify(students));
        }
    });
}
</script>
</body>
</html>
